#시작할 때 알아야 할 것
-docker-compose up 시에 elasticsearch,kibana,logstash가 모두 동작할건데 logstash는 데이터를 바로 가공해
엘라스틱서치한테 넘겨줌. 따라서 도커 컴포즈 후에 데이터를 쌓을게 아니라면 로그스태시는 도커허브에서 끄는
걸 추천(CPU,램 ㅈㄴ 잡아먹음)
-시각화는 그냥 vote_result라는 명이 인덱스이름에 포함되면 전부 포함해 산정시키도록 함. 

따라서 시연때는 기존 생성된 인덱스만 제거하고 실행하는 것을 추천함.

#kibana로 들어가는 법

-키바나가 elk를 실질적으로 관리하고 시각화가 이루어지는 영역
주소:localhost:5601
id:elastic
pw:changeme
로 웹 브라우저에서 접속가능

-초기 창에서 dashboard로 들어가면 시각화한 데이터들을 확인 할 수 있음.
-만약 인덱스를 삭제하고 싶은 경우 창 좌측 맨 하단에 stack management->elasticsearch 카테고리에 index 부분에
형성된 인덱스들이 존재하고 해당 인덱스를 제거하면 됨.(단,index template는 없으면 시각화까지는 문제 없는데
시각화에서 candidate를 시각화에 집계가 불가능한 text타입으로 받아들여서 candidate를 시각화 변수로 못 씀.)

#인덱스 템플릿과 인덱스
-인덱스:로그스태시를 거쳐서 온 데이터를 해당 자료형에 맞게 키-값을 매핑하고 추후 시각화를 자료형에 따라 진행
**반드시 로그스태시의 output에 할당된 인덱스명과 엘라스틱서치에 할당된 인덱스의 이름,매핑이 맞아야만 함

-인덱스템플릿:해당 인덱스가 없어도 인덱스의 이름형식이 맞으면 자동으로 엘라스틱서치에 인덱스를 생성.


#시각화를 할 파일을 지정하는 방법
-docker-compose.yml의 logstash 부분에 해당 파일의 경로를 마운트하고 
logstash/pipeline/logstash.conf 내의 file attribute의 경로명까지 수정하면 해당 파일을 읽어옴

#추가 시각화를 원할 때

-이걸 처음에는 SQL쿼리처럼 짜서 시각화했었는데 지금쓰는 게 최신버전이라 그럴 필요없이 
그냥 대시보드에 들어가서 마우스로 x축,y축 지정해서 그래프 손 쉽게 만들 수 있음.

